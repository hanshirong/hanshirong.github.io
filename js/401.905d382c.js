"use strict";(self["webpackChunkcloud_music"]=self["webpackChunkcloud_music"]||[]).push([[401],{1399:function(t,i,s){s.d(i,{Z:function(){return o}});var e=function(){var t=this,i=t._self._c;return i("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],ref:"listCard",staticClass:"listCard",attrs:{"infinite-scroll-disabled":t.disabled,"infinite-scroll-distance":300,"infinite-scroll-immediate":!1}},t._l(t.listCardData,(function(s,e){return i("div",{key:e,staticClass:"listCardItem",on:{click:function(i){return t.clickListCardItem(s.id)}}},[i("div",{staticClass:"image"},[i("img",{attrs:{src:(s.picUrl||s.coverImgUrl)+"?param=400y400",alt:""}})]),i("div",{staticClass:"title"},[t._v(t._s(s.name))])])})),0)},l=[],a={name:"ListCard",props:{listCardData:{type:Array,default(){return[]}},isLoad:{type:Boolean,default(){return!1}}},data(){return{disabled:!0}},methods:{clickListCardItem(t){this.$emit("clickListCardItem",t)},load(){this.$emit("bottomLoad"),this.disabled=!0}},watch:{listCardData(){1==this.isLoad&&(0!=this.listCardData.length?this.disabled=!1:this.disabled=!0)}}},c=a,n=s(1001),r=(0,n.Z)(c,e,l,!1,null,"a4cfd9ea",null),o=r.exports},2153:function(t,i,s){s.d(i,{Z:function(){return o}});var e=function(){var t=this,i=t._self._c;return i("div",{staticClass:"listTableContainer"},[i("div",{staticClass:"left"},[i("div",{staticClass:"listCover"},[i("img",{attrs:{src:t.officialListDetailItem.coverImgUrl||t.cover,alt:""},on:{click:function(i){t.officialListDetailItem.coverImgUrl&&t.clickPlayList(t.officialListDetailItem.id)}}})])]),i("div",{staticClass:"right"},[i("table",t._l(t.officialListDetailItem.tracks&&t.officialListDetailItem.tracks.slice(0,5)||t.officialListDetailItem.topSongs&&(t.officialListDetailItem.isOpen?t.officialListDetailItem.topSongs:t.officialListDetailItem.topSongs.slice(0,10))||t.officialListDetailItem.songs.slice(0,10),(function(s,e){return i("tr",{key:e,staticClass:"listRows",on:{click:function(i){return t.handleRowClick(i)},dblclick:function(i){return t.handleRowDbClick(i,t.officialListDetailItem.id||s.id,e)}}},[i("td",{staticClass:"index",class:e<3?"topthree":""},[t._v(t._s(e+1))]),i("td",{staticClass:"musicName"},[t._v(t._s(s.name))]),i("td",{staticClass:"singer"},[t._v(t._s(s.ar[0].name))])])})),0),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isCheckAllShow,expression:"isCheckAllShow"}],staticClass:"checkAll",on:{click:function(i){return t.clickCheckAll(t.officialListDetailItem.id)}}},[t._v(" 查看全部 "),i("i",{staticClass:"iconfont icon-arrow-right-bold"})])])])},l=[],a={name:"ListTable",data(){return{}},props:{officialListDetailItem:{type:Object,default(){return{}}},cover:{type:String,default(){return""}},listId:{type:String,default(){return""}},isCheckAllShow:{type:Boolean,default(){return!0}}},methods:{handleRowClick(t){var i=t.composedPath?t.composedPath():t.path;this.$emit("handleRowClick",i[0])},handleRowDbClick(t,i,s){let e=this.listId;this.$emit("handleRowDbClick",{id:i,index:s,listId:e})},clickCheckAll(t){let i=this.listId;this.$emit("clickCheckAll",{id:t,listId:i})},clickPlayList(t){let i=this.listId;this.$emit("clickPlayList",{id:t,listId:i})}}},c=a,n=s(1001),r=(0,n.Z)(c,e,l,!1,null,"073fa8cf",null),o=r.exports},8401:function(t,i,s){s.r(i),s.d(i,{default:function(){return u}});var e=function(){var t=this,i=t._self._c;return i("div",{staticClass:"rankingContainer"},[0!=t.officialListDetail.length?i("div",{staticClass:"ranking"},[i("div",{staticClass:"offical"},[i("div",{staticClass:"title"},[t._v("官方榜")]),t._l(t.officialListDetail,(function(s,e){return i("list-table",{key:e,attrs:{officialListDetailItem:s},on:{handleRowClick:t.handleRowClick,handleRowDbClick:t.handleRowDbClick,clickCheckAll:t.clickListCardItem,clickPlayList:t.clickPlayList}})}))],2),i("div",{staticClass:"global"},[i("div",{staticClass:"title"},[t._v("全球榜")]),i("list-card",{staticClass:"listCard",attrs:{listCardData:t.globalList},on:{clickListCardItem:t.clickListCardItem}})],1)]):t._e()])},l=[],a=(s(7658),s(3214)),c=s(2153),n=s(1399),r={components:{ListTable:c.Z,ListCard:n.Z},name:"Ranking",data(){return{officialList:[],officialListDetail:[],globalList:[]}},methods:{async getAllRankings(){let t=await this.$request("/toplist");this.officialList=t.data.list.slice(0,4),this.globalList=t.data.list.slice(4)},async getMusicListDetail(t){let i=await this.$request("/playlist/detail",{id:t});i=i.data.playlist,i.tracks.forEach(((t,s)=>{i.tracks[s].dt=(0,a.oF)(t.dt)})),this.officialListDetail.push(i)},handleRowClick(t){},handleRowDbClick({id:t,index:i}){let s=this.officialListDetail.findIndex((i=>i.id==t));this.$store.commit("updateMusicId",this.officialListDetail[s].tracks[i].id),t!=this.$store.state.musicListId&&this.$store.commit("updateMusicList",{musicList:this.officialListDetail[s].tracks,musicListId:t})},clickListCardItem(t){this.$store.state.isLogin?(t.id&&(t=t.id),this.$router.push({name:"musicListDetail",params:{id:t}})):this.$message.error("登录后才能查看全部歌曲哦!")},clickPlayList(t){console.log(t,this.officialListDetail);let i=this.officialListDetail.findIndex((i=>i.id==t));this.$store.commit("updateMusicId",this.officialListDetail[i].tracks[0].id),t!=this.$store.state.musicListId&&this.$store.commit("updateMusicList",{musicList:this.officialListDetail[i].tracks,musicListId:t})}},async created(){await this.getAllRankings(),this.officialList.forEach((t=>{this.getMusicListDetail(t.id)}))}},o=r,d=s(1001),f=(0,d.Z)(o,e,l,!1,null,"3576544d",null),u=f.exports},3214:function(t,i,s){function e(t){t=parseInt(t),t=t>1e4?Math.floor(t/1e3):Math.floor(t);let i=Math.floor(t/60),s=Math.floor(t%60);return i=i<10?"0"+i:i,s=s<10?"0"+s:s,i+":"+s}function l(){return Date.now()}function a(t){t=t.split(":");let i=parseInt(t[0]),s=parseInt(t[1]);return 60*i+s}function c(t,i){/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));let s={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(let e in s)if(new RegExp(`(${e})`).test(i)){let t=s[e]+"";i=i.replace(RegExp.$1,1===RegExp.$1.length?t:r(t))}return i}function n(t){return t>1e4?(t=(t/1e4).toFixed(1),t+"万"):t}function r(t){return("00"+t).substr(t.length)}s.d(i,{J4:function(){return a},dg:function(){return l},oF:function(){return e},p6:function(){return c},xw:function(){return n}})}}]);
//# sourceMappingURL=401.905d382c.js.map