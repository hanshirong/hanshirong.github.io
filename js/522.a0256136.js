"use strict";(self["webpackChunkcloud_music"]=self["webpackChunkcloud_music"]||[]).push([[522],{1399:function(t,i,s){s.d(i,{Z:function(){return o}});var a=function(){var t=this,i=t._self._c;return i("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],ref:"listCard",staticClass:"listCard",attrs:{"infinite-scroll-disabled":t.disabled,"infinite-scroll-distance":300,"infinite-scroll-immediate":!1}},t._l(t.listCardData,(function(s,a){return i("div",{key:a,staticClass:"listCardItem",on:{click:function(i){return t.clickListCardItem(s.id)}}},[i("div",{staticClass:"image"},[i("img",{attrs:{src:(s.picUrl||s.coverImgUrl)+"?param=400y400",alt:""}})]),i("div",{staticClass:"title"},[t._v(t._s(s.name))])])})),0)},e=[],r={name:"ListCard",props:{listCardData:{type:Array,default(){return[]}},isLoad:{type:Boolean,default(){return!1}}},data(){return{disabled:!0}},methods:{clickListCardItem(t){this.$emit("clickListCardItem",t)},load(){this.$emit("bottomLoad"),this.disabled=!0}},watch:{listCardData(){1==this.isLoad&&(0!=this.listCardData.length?this.disabled=!1:this.disabled=!0)}}},c=r,n=s(1001),l=(0,n.Z)(c,a,e,!1,null,"a4cfd9ea",null),o=l.exports},2537:function(t,i,s){s.d(i,{Z:function(){return o}});var a=function(){var t=this,i=t._self._c;return i("div",{staticClass:"navBar"},t._l(t.SecondNavBarData,(function(s,a){return i("div",{key:a,staticClass:"barItem",class:a==t.activeNum?"active":"",style:0==t.itemWidth?"":"width:"+t.itemWidth+"px;",on:{click:function(i){return t.clickSecondBarItem(a)}}},[t._v(" "+t._s(s.name)+" ")])})),0)},e=[],r={name:"SecondNavBar",data(){return{activeNum:0}},props:{SecondNavBarData:{type:Array,default(){return[]}},itemWidth:{type:Number,default(){return 40}},currentTag:{type:Object,default(){return{}}}},methods:{clickSecondBarItem(t){this.activeNum!=t&&(this.activeNum=t,this.$emit("clickSecondBarItem",t))}},watch:{currentTag(t){this.activeNum=this.SecondNavBarData.findIndex((i=>i.name==t.name))}}},c=r,n=s(1001),l=(0,n.Z)(c,a,e,!1,null,"d900d204",null),o=l.exports},522:function(t,i,s){s.r(i),s.d(i,{default:function(){return f}});var a=function(){var t=this,i=t._self._c;return i("div",{staticClass:"musicListIndex"},[i("div",{staticClass:"highqualityEntry"},[i("img",{staticClass:"backgroundImg",attrs:{src:t.theFirstOfHighquality.coverImgUrl,alt:""}}),i("div",{staticClass:"cover"},[i("img",{attrs:{src:t.theFirstOfHighquality.coverImgUrl,alt:""}})]),i("div",{staticClass:"EntryInfo"},[t._m(0),i("div",{staticClass:"name"},[t._v(t._s(t.theFirstOfHighquality.name))]),i("div",{staticClass:"desc"},[t._v(t._s(t.theFirstOfHighquality.copywriter))])])]),i("div",{staticClass:"musicListNavBar"},[i("div",{staticClass:"left"},[i("sort-box",{attrs:{currentTag:t.currentTag,sortList:t.sortList},on:{getSortList:t.getSortList,clickSortBoxItem:t.clickSortBoxItem}})],1),i("div",{staticClass:"right"},[i("second-nav-bar",{attrs:{SecondNavBarData:t.hotTags,itemWidth:0,currentTag:t.currentTag},on:{clickSecondBarItem:t.clickSecondBarItem}})],1)]),i("list-card",{attrs:{listCardData:t.musicList.playlists},on:{clickListCardItem:t.clickListCardItem}}),t.musicList.playlists?i("div",{staticClass:"page"},[i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.musicList.total,"page-size":50,small:"","current-page":t.currentPage},on:{"current-change":t.pageChange}})],1):t._e()],1)},e=[function(){var t=this,i=t._self._c;return i("div",{staticClass:"tag"},[i("i",{staticClass:"iconfont icon-good"}),t._v(" 精品歌单")])}],r=(s(7658),s(2537)),c=s(1399),n=function(){var t=this,i=t._self._c;return i("div",{staticClass:"SortBoxContainer"},[i("el-popover",{attrs:{placement:"bottom-start",width:"350","popper-class":"sortPop",trigger:"click","visible-arrow":!1},on:{show:t.showSortPop},model:{value:t.isSortPopShow,callback:function(i){t.isSortPopShow=i},expression:"isSortPopShow"}},[i("div",{staticClass:"SortBox",attrs:{slot:"reference"},slot:"reference"},[t._v(" "+t._s(t.currentTag.name)+" "),i("i",{staticClass:"iconfont icon-arrow-right-bold"})]),0==t.sortList.length?i("div",{staticClass:"tips"},[t._v("正在加载分类数据...")]):i("div",{staticClass:"sortList"},t._l(t.sortList,(function(s,a){return i("div",{key:a,staticClass:"sortItme",class:t.currentTag.name==s.name?"currentItem":"",on:{click:function(i){return t.clickItem(s)}}},[t._v(" "+t._s(s.name)+" ")])})),0)])],1)},l=[],o={name:"SortBox",props:{currentTag:{type:Object,default(){return{}}},sortList:{type:Array,default(){return[]}}},data(){return{isSortPopShow:!1}},methods:{showSortPop(){0==this.sortList.length&&this.$emit("getSortList")},clickItem(t){this.$emit("clickSortBoxItem",t),this.isSortPopShow=!1}}},u=o,d=s(1001),h=(0,d.Z)(u,n,l,!1,null,"29096640",null),m=h.exports,g={components:{ListCard:c.Z,SortBox:m,SecondNavBar:r.Z},name:"musicListIndex",data(){return{theFirstOfHighquality:{},hotTags:[],musicList:{},currentTag:{},currentPage:1,sortList:[]}},methods:{async getTheFirstOfHighquality(){let t=await this.$request("/top/playlist/highquality",{limit:1});this.theFirstOfHighquality=t.data.playlists[0]},async getHotTag(){let t=await this.$request("/playlist/hot");this.currentTag=t.data.tags[0],this.hotTags=t.data.tags},async getMusicList(){this.musicList={};let t=await this.$request("/top/playlist",{cat:this.currentTag.name,offset:50*(this.currentPage-1)});this.musicList=t.data},async getSortList(){let t=await this.$request("/playlist/catlist");this.sortList=t.data.sub},clickSecondBarItem(t){this.currentTag=this.hotTags[t],this.currentPage=1,this.getMusicList()},pageChange(t){this.currentPage=t,this.getMusicList()},clickListCardItem(t){console.log(t),this.$router.push({name:"musicListDetail",params:{id:t}})},clickSortBoxItem(t){this.currentTag=t,this.currentPage=1,this.getMusicList()}},async created(){this.getTheFirstOfHighquality(),await this.getHotTag(),this.getMusicList()}},v=g,p=(0,d.Z)(v,a,e,!1,null,"2c53b2c9",null),f=p.exports}}]);
//# sourceMappingURL=522.a0256136.js.map